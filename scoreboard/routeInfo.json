{"path":"scoreboard","templateID":1,"sharedPropsHashes":{"apiList":"Z2bLVc7"},"localProps":{"reference":{"title":"スコアボードを利用する","slug":"scoreboard","description":"RPGアツマール内で動作するゲームのスコア(点数)を記録・取得できる仕組みです。","contents":"<h2>概要</h2>\n<p>ゲーム内でのスコアをアツマールのサーバーに登録し、ランキングを表示する機能です。\nゲームをプレイするユーザの点数を取得したり、スコアボードごとに上位の点数を取得することができます。</p>\n<p><img src=\"https://atsumaru.github.io/api-references/images/scoreboard_sample1.png\" alt=\"スコアボードの表示\"></p>\n<h3>スコアボードの仕様について</h3>\n<ul>\n<li>プレミアム会員のスコアは半永久的に残り、一般会員のスコアは直近の一定数が残る仕様となっています。\n未ログインユーザーは、ランキングの表示はできますがサーバーに保存されません。</li>\n<li>その他スコアボード機能自体の仕様については<a href=\"https://qa.nicovideo.jp/faq/show/12127\">ヘルプ</a>をご確認下さい。</li>\n</ul>\n<h3>アツマール公式での利用例</h3>\n<p>アツマール公式では例えば次のゲームでこの機能を利用しています。</p>\n<ul>\n<li><a href=\"https://game.nicovideo.jp/atsumaru/games/gm6444\">ちおちゃんの通学路</a></li>\n</ul>\n<h2>設置方法</h2>\n<p>スコアボードを利用するには下記2つの方法が利用できます。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">方法</th>\n<th align=\"left\">場所</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">アツマール公式プラグイン</td>\n<td align=\"left\"><a href=\"https://github.com/atsumaru/mv-plugins/blob/master/plugins/AtsumaruScoreboardsExperimental.js\">Github</a></td>\n</tr>\n<tr>\n<td align=\"left\">アツマール API</td>\n<td align=\"left\">-</td>\n</tr>\n</tbody></table>\n<h2>スコアボードについて</h2>\n<p><img src=\"https://atsumaru.github.io/api-references/images/scoreboard_howtouse.png\" alt=\"スコアボードについて\"></p>\n<p>スコアボードは、RPGアツマール内で動作するゲーム毎にスコアが記録できる仕組みです。各ゲーム毎に10個のスコアボードが利用できるので、スコアボード毎に違うスコアを記録し利用することができます。スコアボードを利用するには、スコアボードIDを指定してスコアの登録を行い、スコアボードID毎にスコアを取得します。スコア情報はスコアボードID毎に管理されているため、複数のスコアランキングを利用したい場合などには異なるスコアボードIDで情報の登録・取得を行ってください。</p>\n<p>スコアボードIDは1〜10の半角数字の連番です。</p>\n<h2>公式プラグインの利用方法</h2>\n<p>公式プラグインでスコアボードを設置するには次のようにします。</p>\n<ol>\n<li>プロジェクトのプラグインフォルダに <a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruScoreboardsExperimental.js\">AtsumaruScoreboardsExperimental.js</a> を右クリックし「保存」して設置</li>\n<li>イベントに記録・取得・表示イベントの設定</li>\n<li>プラグインコマンドでスコアの記録・取得・表示</li>\n</ol>\n<h3>スコアボードへの記録</h3>\n<p><img src=\"https://atsumaru.github.io/api-references/images/set-record-to-scoreboard_plugin_sample.png\" alt=\"スコアボードへの記録\"></p>\n<p><br></p>\n<p>公式プラグインを利用してスコアボードへの記録を行う場合、プラグインコマンドで次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>SetRecordToScoreboard {boardId} {variableId}\nスコア送信 {boardId} {variableId}</code></pre><p><code>{boardId}</code>にはスコアを記録したいスコアボードのIDを半角数字で指定してください。また、<code>{variableId}</code>にはスコアが格納されている変数のIDを記載してください。</p>\n<p><br></p>\n<h4>スコアボードへの記録：応用</h4>\n<p>スコアボードへの記録を行いながら、記録に成功したかチェックする場合、プラグインコマンドで次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>SetRecordToScoreboard {boardId} {variableId} {errorVariableId}\nスコア送信 {boardId} {variableId} {errorVariableId}</code></pre><p>記録に失敗した場合、<code>{errorVariableId}</code>で指定されたIDの変数にエラーメッセージがセットされます。記録に成功した場合は、単に0がセットされます。</p>\n<p><br></p>\n<h3>スコアボードの表示</h3>\n<p><img src=\"https://atsumaru.github.io/api-references/images/display-scoreboard_plugin_sample.png\" alt=\"スコアボードの表示\"></p>\n<p><br></p>\n<p>公式プラグインを利用してスコアボードへの記録を行う場合、プラグインコマンドで次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>DisplayScoreboard {boardId}\nスコア表示 {boardId}</code></pre><p><code>{boardId}</code>には表示したスコアボードのIDを半角数字で指定してください。</p>\n<h3>スコアボードのデータの読み込み</h3>\n<p>スコアボード内の情報を取得し利用するには、</p>\n<ol>\n<li>スコアボードからデータの読み込み</li>\n<li>利用する情報を指定(ターゲットの指定)して変数に格納</li>\n</ol>\n<p>の手順が必要です。</p>\n<p>公式プラグインを利用してスコアボード内の情報を取得するには、プラグインコマンドで次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>FetchRecordsFromScoreboard {boardId}\nスコア受信 {boardId}</code></pre><p><code>{boardId}</code>には取得したいスコアボードのIDを半角数字で指定してください。</p>\n<p><br></p>\n<h3>スコアボード内の情報利用</h3>\n<p>スコアボード内に格納されている情報を利用するには、事前に上述の方法でスコアボードからデータを読み込み、下記の方法で利用する情報をターゲットとして指定し変数に格納してください。</p>\n<p><img src=\"https://atsumaru.github.io/api-references/images/get-data-from-scoreboard-record_plugin_sample.png\" alt=\"スコアボード内の情報利用\"></p>\n<p><br></p>\n<p>公式プラグインを利用してスコアボード内の情報を変数に格納するには、プラグインコマンドで次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>GetDataFromScoreboardRecords {target} {variableId}\nスコア取得 {target} {variableId}</code></pre><p><code>{target}</code>には取得したいターゲットを指定(下部に利用できるターゲットを記載)。<code>{variableId}</code>には格納したい変数のIDを指定してください。</p>\n<h4>利用できるターゲットの一覧</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">ターゲット</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">myRecord</td>\n<td align=\"left\">今回の自己レコードの有無を取得。ある場合は1、ない場合は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.rank</td>\n<td align=\"left\">今回の自己レコードのランキング順位を取得。ない場合は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.score</td>\n<td align=\"left\">今回の自己レコードのスコアを取得。ない場合は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.isNewRecord</td>\n<td align=\"left\">今回の自己レコードが自己新記録かどうかを取得。自己新記録なら1、そうでない場合は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord</td>\n<td align=\"left\">自己ベスト記録の有無を取得。ある場合は1、ない場合（または非ログイン）は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord.rank</td>\n<td align=\"left\">自己ベスト記録のランキング順位を取得。ない場合（または非ログイン）は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord.score</td>\n<td align=\"left\">自己ベスト記録のスコアを取得。ない場合（または非ログイン）は0がセットされる</td>\n</tr>\n<tr>\n<td align=\"left\">ranking.length</td>\n<td align=\"left\">ランキングデータの長さの取得</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].rank</td>\n<td align=\"left\">n+1番目のランキングを取得</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].userName</td>\n<td align=\"left\">n+1番目のランクのユーザ名を取得</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].score</td>\n<td align=\"left\">n+1番目のランクのスコアを取得</td>\n</tr>\n<tr>\n<td align=\"left\">errorMessage</td>\n<td align=\"left\">スコアの読み込みに失敗した場合、エラーメッセージを取得する。成功した場合は0がセットされる</td>\n</tr>\n</tbody></table>\n<h2>APIを使ったスコアボードの利用方法</h2>\n<h3>スコアボードへの記録</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\">window.RPGAtsumaru.experimental.scoreboards.setRecord(board_id, score)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">引数のboard_idを指定することによりスコアを記録するスコアボードを指定。<br>第2引数のscoreでスコアを指定し、記録するスコアの点数を記録。</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\"><ul><li>スコアボードID(1〜10までの整数)</li><li>記録するスコアの点数</li></ul></td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\">Promise[void]</td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/06/15</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/08/28</td>\n</tr>\n</tbody></table>\n<h3>スコアボードを表示する</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\">window.RPGAtsumaru.experimental.scoreboards.display(board_id)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">引数のboard_idを指定することによりスコアを記録するスコアボードを指定してスコアボード表示</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">スコアボードID(1〜10までの整数)</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\">Promise[void]</td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/06/15</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/06/15</td>\n</tr>\n</tbody></table>\n<h3>スコアボードからのデータ取得・利用</h3>\n<p>スコアボード内の情報を取得し利用するには、</p>\n<ol>\n<li>スコアボードからデータを読み込み</li>\n<li>利用する情報を指定(ターゲットの指定)して変数に格納</li>\n</ol>\n<p>の手順が必要です。</p>\n<h3>スコアボードからデータを読み込み</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\">window.RPGAtsumaru.experimental.scoreboards.getRecords(board_id)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">引数のboard_idを指定することによりスコアボードの情報を取得</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">スコアボードID(1〜10までの整数)</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\">Promise[<code>ScoreboardData</code>]</td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/06/15</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/06/15</td>\n</tr>\n</tbody></table>\n<h4>ScoreboardDataオブジェクトについて</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">型</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">boardId</td>\n<td align=\"left\">number</td>\n<td align=\"left\">ボードID</td>\n</tr>\n<tr>\n<td align=\"left\">boardName</td>\n<td align=\"left\">string</td>\n<td align=\"left\">ボードの名前</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord</td>\n<td align=\"left\">object or null</td>\n<td align=\"left\">今回の自己レコード</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.rank</td>\n<td align=\"left\">number</td>\n<td align=\"left\">今回の自己レコードのランキング順位</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.score</td>\n<td align=\"left\">number</td>\n<td align=\"left\">今回の自己レコードのスコア</td>\n</tr>\n<tr>\n<td align=\"left\">myRecord.isNewRecord</td>\n<td align=\"left\">boolean</td>\n<td align=\"left\">今回の自己レコードが自己新記録かどうか</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord</td>\n<td align=\"left\">object or null</td>\n<td align=\"left\">自己ベスト記録。ログインしていないと必ずnullになる</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord.rank</td>\n<td align=\"left\">number</td>\n<td align=\"left\">自己ベスト記録のランキング順位</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord.userName</td>\n<td align=\"left\">string</td>\n<td align=\"left\">自己ベスト記録のユーザ名</td>\n</tr>\n<tr>\n<td align=\"left\">myBestRecord.score</td>\n<td align=\"left\">number</td>\n<td align=\"left\">自己ベスト記録のスコア</td>\n</tr>\n<tr>\n<td align=\"left\">ranking</td>\n<td align=\"left\">array</td>\n<td align=\"left\">ランキングデータ</td>\n</tr>\n<tr>\n<td align=\"left\">ranking.length</td>\n<td align=\"left\">number</td>\n<td align=\"left\">ランキングデータの長さ</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].rank</td>\n<td align=\"left\">number</td>\n<td align=\"left\">n+1番目のランキング</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].userName</td>\n<td align=\"left\">string</td>\n<td align=\"left\">n+1番目のランクのユーザ名</td>\n</tr>\n<tr>\n<td align=\"left\">ranking[n].score</td>\n<td align=\"left\">number</td>\n<td align=\"left\">n+1番目のランクのスコア</td>\n</tr>\n</tbody></table>\n"}}}
